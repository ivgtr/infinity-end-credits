import type { Roles } from "@/types/role";
import type { Staffs } from "@/types/staff";

import { getKeys } from "./object";
import { generateNames } from "./generate";

const EVANGELIONRole: Roles = {
  "企画・原作・脚本": {
    required: true,
    max: 1,
    index: 0,
  },
  画コンテ: {
    required: false,
    max: 30,
    index: 0,
  },
  "画コンテ案・イメージボード": {
    required: false,
    max: 30,
    index: 0,
  },
  総作画監督: {
    required: false,
    max: 1,
    index: 0,
  },
  作画監督: {
    required: false,
    max: 30,
    index: 0,
  },
  メカ作画監督: {
    required: false,
    max: 30,
    index: 0,
  },
  メカ作画監督補佐: {
    required: false,
    max: 30,
    index: 0,
  },
  アヴァン総作画監督: {
    required: false,
    max: 30,
    index: 0,
  },
  副監督: {
    required: false,
    max: 30,
    index: 0,
  },
  "主・メカニックデザイン": {
    required: false,
    max: 30,
    index: 0,
  },
  コンセプトアートディレクター: {
    required: false,
    max: 30,
    index: 0,
  },
  キャラクターデザイン原案: {
    required: false,
    max: 30,
    index: 0,
  },
  キャラクターデザイン: {
    required: false,
    max: 30,
    index: 0,
  },
  メカニックデザイン: {
    required: false,
    max: 30,
    index: 0,
  },
  美術設定: {
    required: false,
    max: 30,
    index: 0,
  },
  原画: {
    required: false,
    max: 30,
    index: 0,
  },
  第二原画: {
    required: false,
    max: 30,
    index: 0,
  },
  デジタル作画修正: {
    required: false,
    max: 30,
    index: 0,
  },
  動画検査: {
    required: false,
    max: 30,
    index: 0,
  },
  動画: {
    required: false,
    max: 30,
    index: 0,
  },
  色彩設計: {
    required: false,
    max: 30,
    index: 0,
  },
  色指定検査: {
    required: false,
    max: 30,
    index: 0,
  },
  仕上げ検査補佐: {
    required: false,
    max: 30,
    index: 0,
  },
  仕上げ管理: {
    required: false,
    max: 30,
    index: 0,
  },
  仕上げ: {
    required: false,
    max: 30,
    index: 0,
  },
  仕上げ協力: {
    required: false,
    max: 30,
    index: 0,
  },
  "特殊効果/ブラシワーク": {
    required: false,
    max: 30,
    index: 0,
  },
  美術監督: {
    required: false,
    max: 30,
    index: 0,
  },
  美術: {
    required: false,
    max: 30,
    index: 0,
  },
  背景: {
    required: false,
    max: 30,
    index: 0,
  },
  美術2Dワークス: {
    required: false,
    max: 30,
    index: 0,
  },
  美術制作管理: {
    required: false,
    max: 30,
    index: 0,
  },
  美術制作コーディネーター: {
    required: false,
    max: 30,
    index: 0,
  },
  美術制作協力: {
    required: false,
    max: 30,
    index: 0,
  },
  "CGI/VFX": {
    required: false,
    max: 30,
    index: 0,
  },
  CGIアートディレクター: {
    required: false,
    max: 30,
    index: 0,
  },
  "2DCGIディレクター": {
    required: false,
    max: 30,
    index: 0,
  },
  "2DCGI・モーショングラフィックスデザイナー": {
    required: false,
    max: 30,
    index: 0,
  },
  モーショングラフィックスデザイナー: {
    required: false,
    max: 30,
    index: 0,
  },
  ビジュアルデベロップメント: {
    required: false,
    max: 30,
    index: 0,
  },
  CGI監督: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIアニメーションディレクター: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIモデリングディレクター: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIテクニカルディレクター: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIルックデヴディレクター: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIリードアニメーター: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIアニメーター: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIリードモデラー: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIモデラー: {
    required: false,
    max: 30,
    index: 0,
  },
  リードテクニカルアーティスト: {
    required: false,
    max: 30,
    index: 0,
  },
  テクニカルアーティスト: {
    required: false,
    max: 30,
    index: 0,
  },
  レンダリングアーティスト: {
    required: false,
    max: 30,
    index: 0,
  },
  CGIディベロップメント: {
    required: false,
    max: 30,
    index: 0,
  },
  プロダクションマネージャー: {
    required: false,
    max: 30,
    index: 0,
  },
  撮影監督: {
    required: false,
    max: 30,
    index: 0,
  },
  副撮影監督: {
    required: false,
    max: 30,
    index: 0,
  },
  撮影監督補佐: {
    required: false,
    max: 30,
    index: 0,
  },
  撮影: {
    required: false,
    max: 30,
    index: 0,
  },
  特技監督: {
    required: false,
    max: 30,
    index: 0,
  },
  特殊技術撮影: {
    required: false,
    max: 30,
    index: 0,
  },
  撮影管理: {
    required: false,
    max: 30,
    index: 0,
  },
  特技開発: {
    required: false,
    max: 30,
    index: 0,
  },
  コンポジットテクニカルアーティスト: {
    required: false,
    max: 30,
    index: 0,
  },
  セル画アナログ撮影: {
    required: false,
    max: 30,
    index: 0,
  },
  ラインテスト: {
    required: false,
    max: 30,
    index: 0,
  },
  名誉特技監督: {
    required: false,
    max: 30,
    index: 0,
  },
  編集: {
    required: false,
    max: 30,
    index: 0,
  },
  編集助手: {
    required: false,
    max: 30,
    index: 0,
  },
  声ノ出演: {
    required: false,
    max: 30,
    index: 0,
  },
  音楽: {
    required: false,
    max: 30,
    index: 0,
  },
  音響制作: {
    required: false,
    max: 30,
    index: 0,
  },
  音響効果: {
    required: false,
    max: 30,
    index: 0,
  },
  録音: {
    required: false,
    max: 30,
    index: 0,
  },
  台詞演出: {
    required: false,
    max: 30,
    index: 0,
  },
  台詞演出助手: {
    required: false,
    max: 30,
    index: 0,
  },
  音響効果助手: {
    required: false,
    max: 30,
    index: 0,
  },
  "音響制作・担当": {
    required: false,
    max: 30,
    index: 0,
  },
  台詞録音スタジオ: {
    required: false,
    max: 30,
    index: 0,
  },
  ダビングステージ: {
    required: false,
    max: 30,
    index: 0,
  },
  スタジオエンジニア: {
    required: false,
    max: 30,
    index: 0,
  },
  テクニカルサポート: {
    required: false,
    max: 30,
    index: 0,
  },
  制作: {
    required: false,
    max: 30,
    index: 0,
  },
  制作統括プロデューサー: {
    required: false,
    max: 30,
    index: 0,
  },
  アニメーションプロデューサー: {
    required: false,
    max: 30,
    index: 0,
  },
  設定制作: {
    required: false,
    max: 30,
    index: 0,
  },
  制作進行: {
    required: false,
    max: 30,
    index: 0,
  },
  リテイク管理: {
    required: false,
    max: 30,
    index: 0,
  },
  プリヴィズ制作: {
    required: false,
    max: 30,
    index: 0,
  },
  制作進行補佐: {
    required: false,
    max: 30,
    index: 0,
  },
  スタジオマネジメント: {
    required: false,
    max: 30,
    index: 0,
  },
  コーポレートマネジメント: {
    required: false,
    max: 30,
    index: 0,
  },
  システムマネジメント: {
    required: false,
    max: 30,
    index: 0,
  },
  社長室マネジメント: {
    required: false,
    max: 30,
    index: 0,
  },
  車両協力: {
    required: false,
    max: 30,
    index: 0,
  },
  制作協力: {
    required: false,
    max: 30,
    index: 0,
  },
  機材協力: {
    required: false,
    max: 30,
    index: 0,
  },
  画面協力: {
    required: false,
    max: 30,
    index: 0,
  },
  音響協力: {
    required: false,
    max: 30,
    index: 0,
  },
  アーカイブ協力: {
    required: false,
    max: 30,
    index: 0,
  },
  "取材・考証協力": {
    required: false,
    max: 30,
    index: 0,
  },
  ロケーション協力: {
    required: false,
    max: 30,
    index: 0,
  },
  協力: {
    required: false,
    max: 30,
    index: 0,
  },
  製作: {
    required: false,
    max: 30,
    index: 0,
  },
  "エグゼクティブ・プロデューサー": {
    required: false,
    max: 1,
    index: 0,
  },
  監督: {
    required: true,
    max: 30,
    index: 0,
  },
  総監督: {
    required: true,
    max: 1,
    index: 100,
  },
};

// ランダムな順番でrolesをマージする
const mergeRoles = (...objects: Roles[]) => {
  const shuffledObjects = objects.sort(() => Math.random() - 0.5);

  const mergedObject: Roles = Object.assign({}, ...shuffledObjects);

  return mergedObject;
};

export const generateRoleStaff = () => {
  const roles = mergeRoles(EVANGELIONRole);

  const randomRoleSize = Math.floor(Math.random() * Object.keys(roles).length) + 1;

  const staffs: Staffs = [];

  for (let i = 0; i < randomRoleSize; i++) {
    const randomRoleIndex = Math.floor(Math.random() * Object.keys(roles).length);
    const roleKey = getKeys(roles)[randomRoleIndex];
    const role = roles[roleKey];
    const members = generateNames(Math.floor(Math.random() * role.max) + 1);

    staffs.push({
      role: roleKey,
      members,
    });
  }

  const sortedStaffs = staffs.sort((a, b) => {
    const aIndex = roles[a.role].index + Math.random();
    const bIndex = roles[b.role].index + Math.random();

    return aIndex - bIndex;
  });

  return sortedStaffs;
};
